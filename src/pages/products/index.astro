
---
// src/pages/products/index.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProductCard from '../../components/ProductCard.astro';
import { getProducts } from '../../lib/db';

const db = Astro.locals.runtime.env.DB;
const products = await getProducts(db, 20);
const locale = Astro.currentLocale || 'id';
---

<BaseLayout title="Products">
  <div class="container mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-8">Products</h1>
    
    <div class="grid md:grid-cols-4 gap-6">
      {products.map(product => (
        <ProductCard product={product} locale={locale} />
      ))}
    </div>
    
    {products.length === 0 && (
      <p class="text-gray-500 text-center py-12">No products yet.</p>
    )}
  </div>
</BaseLayout>
